"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[314],{285:(e,t,a)=>{a.d(t,{$:()=>l,r:()=>i});var r=a(5155),s=a(2115),n=a(4253),o=a(2085),d=a(9434);let i=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,t)=>{let{className:a,variant:s,size:o,asChild:l=!1,...u}=e,c=l?n.DX:"button";return(0,r.jsx)(c,{className:(0,d.cn)(i({variant:s,size:o,className:a})),ref:t,...u})});l.displayName="Button"},2523:(e,t,a)=>{a.d(t,{p:()=>o});var r=a(5155),s=a(2115),n=a(9434);let o=s.forwardRef((e,t)=>{let{className:a,type:s,...o}=e;return(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...o})});o.displayName="Input"},5057:(e,t,a)=>{a.d(t,{J:()=>l});var r=a(5155),s=a(2115),n=a(968),o=a(2085),d=a(9434);let i=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.b,{ref:t,className:(0,d.cn)(i(),a),...s})});l.displayName=n.b.displayName},5127:(e,t,a)=>{a.d(t,{A0:()=>d,BF:()=>i,Hj:()=>l,XI:()=>o,nA:()=>c,nd:()=>u});var r=a(5155),s=a(2115),n=a(9434);let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",a),...s})})});o.displayName="Table";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",a),...s})});d.displayName="TableHeader";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...s})});i.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})}).displayName="TableFooter";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});l.displayName="TableRow";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s})});u.displayName="TableHead";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s})});c.displayName="TableCell",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...s})}).displayName="TableCaption"},5489:(e,t,a)=>{a.d(t,{$O:()=>y,FP:()=>b,Jb:()=>d,K6:()=>f,LB:()=>v,M9:()=>c,Sc:()=>x,TK:()=>l,U$:()=>m,hG:()=>u,lo:()=>i,md:()=>p,ye:()=>g});var r=a(6104),s=a(5317),n=a(858),o=a(9737);let d=async(e,t)=>{let a=(0,s.P)((0,s.rJ)(r.db,"users"),(0,s._M)("email","==",e.toLowerCase()));if(!(await (0,s.GG)(a)).empty)throw Error("El correo '".concat(e,"' ya ha sido invitado o registrado."));await (0,s.gS)((0,s.rJ)(r.db,"users"),{email:e.toLowerCase(),role:t,status:"invitado",name:"Usuario Pendiente"})},i=async e=>{let t=(0,s.rJ)(r.db,"users"),a=e?(0,s.P)(t,(0,s._M)("role","==",e)):t;return(await (0,s.GG)(a)).docs.map(e=>({id:e.id,...e.data()}))},l=async(e,t)=>{await (0,s.mZ)((0,s.H9)(r.db,"users",e),t)},u=async e=>{await (0,s.kd)((0,s.H9)(r.db,"users",e))},c=async e=>{await (0,s.c4)(r.db,async t=>{let a=(0,s.P)((0,s.rJ)(r.db,"assets"),(0,s._M)("name","==",e.name),(0,s._M)("status","==","en stock")),n=await (0,s.GG)(a);if(n.empty){let a=(0,s.H9)((0,s.rJ)(r.db,"assets"));t.set(a,{...e,status:"en stock"})}else{let a=n.docs[0],r=a.data().stock||0;t.update(a.ref,{stock:r+e.stock})}})},f=async()=>{let e=(0,s.rJ)(r.db,"assignmentRequests"),t=(0,s.P)(e,(0,s._M)("status","==","pendiente de env\xedo"));return(await (0,s.GG)(t)).docs.map(e=>({id:e.id,...e.data()}))},m=async e=>{await (0,s.mZ)((0,s.H9)(r.db,"assignmentRequests",e),{status:"enviado"})},p=async()=>{let e=(0,s.rJ)(r.db,"assets"),t=(0,s.P)(e,(0,s._M)("status","==","en stock"),(0,s._M)("stock",">",0));return(await (0,s.GG)(t)).docs.map(e=>({id:e.id,...e.data()}))},b=async()=>{let e=(0,s.P)((0,s.rJ)(r.db,"replacementRequests"),(0,s._M)("status","==","pendiente"));return(await (0,s.GG)(e)).docs.map(e=>({id:e.id,...e.data()}))},g=async e=>{let t=(0,s.P)((0,s.rJ)(r.db,"assets"),(0,s._M)("employeeId","==",e));return(await (0,s.GG)(t)).docs.map(e=>({id:e.id,...e.data()}))},y=async e=>{await (0,s.mZ)((0,s.H9)(r.db,"assets",e),{status:"activo"})},v=async e=>{let t=await (0,s.x7)((0,s.H9)(r.db,"assets",e));return t.exists()?{id:t.id,...t.data()}:null},x=async e=>{let t="";if(e.imageFile){let a=(0,n.KR)(r.IG,"justifications/".concat((0,o.A)(),"-").concat(e.imageFile.name)),s=await (0,n.D)(a,e.imageFile);t=await (0,n.qk)(s.ref)}let{imageFile:a,...d}=e;await (0,s.gS)((0,s.rJ)(r.db,"replacementRequests"),{...d,imageUrl:t,date:s.Dc.now(),status:"pendiente"})}},6104:(e,t,a)=>{a.d(t,{IG:()=>l,db:()=>i,j2:()=>u});var r=a(3915),s=a(5317),n=a(858),o=a(3004);let d=(0,r.Dk)().length?(0,r.Sx)():(0,r.Wp)({apiKey:"AIzaSyB1ZM8tppg9wvPbVb-S_Tst3VdrzVmJR_4",authDomain:"pruebasfijosdn1.firebaseapp.com",projectId:"pruebasfijosdn1",storageBucket:"pruebasfijosdn1.firebasestorage.app",messagingSenderId:"1085419668125",appId:"1:1085419668125:web:3c9e059953cdd953774a74"}),i=(0,s.aU)(d),l=(0,n.c7)(d),u=(0,o.xI)(d)},6126:(e,t,a)=>{a.d(t,{E:()=>d});var r=a(5155);a(2115);var s=a(2085),n=a(9434);let o=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)(o({variant:a}),t),...s})}},6695:(e,t,a)=>{a.d(t,{BT:()=>l,Wu:()=>u,ZB:()=>i,Zp:()=>o,aR:()=>d,wL:()=>c});var r=a(5155),s=a(2115),n=a(9434);let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});o.displayName="Card";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});d.displayName="CardHeader";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});i.displayName="CardTitle";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});l.displayName="CardDescription";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});u.displayName="CardContent";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})});c.displayName="CardFooter"},7481:(e,t,a)=>{a.d(t,{dj:()=>f});var r=a(2115);let s=0,n=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},d=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?o(a):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],l={toasts:[]};function u(e){l=d(l,e),i.forEach(e=>{e(l)})}function c(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>u({type:"DISMISS_TOAST",toastId:a});return u({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function f(){let[e,t]=r.useState(l);return r.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},9434:(e,t,a)=>{a.d(t,{cn:()=>n});var r=a(2596),s=a(9688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},9465:(e,t,a)=>{a.d(t,{A:()=>l,AuthProvider:()=>u});var r=a(5155),s=a(2115),n=a(3004),o=a(5317),d=a(6104);let i=(0,s.createContext)();function l(){return(0,s.useContext)(i)}function u(e){let{children:t}=e,[a,l]=(0,s.useState)(null),[u,c]=(0,s.useState)(null),[f,m]=(0,s.useState)(null),[p,b]=(0,s.useState)(!0),g=async e=>{if(!e){m(null),c(null);return}try{let t=(0,o.P)((0,o.rJ)(d.db,"users"),(0,o._M)("email","==",e.email.toLowerCase())),a=await (0,o.GG)(t);if(a.empty)m(null),c(null);else{let t=a.docs[0],r=t.data();if("invitado"===r.status){await (0,o.mZ)(t.ref,{status:"active",uid:e.uid});let a=(await (0,o.x7)(t.ref)).data();m(a),c(a.role||null)}else m(r),c(r.role||null)}}catch(e){console.error("Error fetching user data:",e),m(null),c(null)}};return(0,s.useEffect)(()=>(0,n.hg)(d.j2,async e=>{l(e),await g(e),b(!1)}),[]),(0,r.jsx)(i.Provider,{value:{currentUser:a,userRole:u,userData:f,login:function(e,t){return(0,n.x9)(d.j2,e,t)},logout:function(){return(0,n.CI)(d.j2)},resetPassword:function(e){return(0,n.J1)(d.j2,e)}},children:!p&&t})}}}]);