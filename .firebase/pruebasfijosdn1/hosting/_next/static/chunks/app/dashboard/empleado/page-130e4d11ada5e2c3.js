(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[815],{1949:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(157).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2980:(e,a,r)=>{"use strict";r.d(a,{Lt:()=>B,Rx:()=>L,Zr:()=>M,EO:()=>F,$v:()=>I,ck:()=>$,wd:()=>H,r7:()=>q,tv:()=>T});var t=r(5155),s=r(2115),i=r(6081),n=r(6101),l=r(5821),o=r(5185);s.forwardRef((e,a)=>{let{children:r,...i}=e,n=s.Children.toArray(r),l=n.find(u);if(l){let e=l.props.children,r=n.map(a=>a!==l?a:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,t.jsx)(c,{...i,ref:a,children:s.isValidElement(e)?s.cloneElement(e,void 0,r):null})}return(0,t.jsx)(c,{...i,ref:a,children:r})}).displayName="Slot";var c=s.forwardRef((e,a)=>{let{children:r,...t}=e;if(s.isValidElement(r)){let e=function(e){let a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=a&&"isReactWarning"in a&&a.isReactWarning;return r?e.ref:(r=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref}(r),i=function(e,a){let r={...a};for(let t in a){let s=e[t],i=a[t];/^on[A-Z]/.test(t)?s&&i?r[t]=(...e)=>{i(...e),s(...e)}:s&&(r[t]=s):"style"===t?r[t]={...s,...i}:"className"===t&&(r[t]=[s,i].filter(Boolean).join(" "))}return{...e,...r}}(t,r.props);return r.type!==s.Fragment&&(i.ref=a?(0,n.t)(a,e):e),s.cloneElement(r,i)}return s.Children.count(r)>1?s.Children.only(null):null});c.displayName="SlotClone";var d=({children:e})=>(0,t.jsx)(t.Fragment,{children:e});function u(e){return s.isValidElement(e)&&e.type===d}var p="AlertDialog",[h,m]=(0,i.A)(p,[l.Hs]),x=(0,l.Hs)(),f=e=>{let{__scopeAlertDialog:a,...r}=e,s=x(a);return(0,t.jsx)(l.bL,{...s,...r,modal:!0})};f.displayName=p;var v=s.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,i=x(r);return(0,t.jsx)(l.l9,{...i,...s,ref:a})});v.displayName="AlertDialogTrigger";var j=e=>{let{__scopeAlertDialog:a,...r}=e,s=x(a);return(0,t.jsx)(l.ZL,{...s,...r})};j.displayName="AlertDialogPortal";var g=s.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,i=x(r);return(0,t.jsx)(l.hJ,{...i,...s,ref:a})});g.displayName="AlertDialogOverlay";var y="AlertDialogContent",[N,b]=h(y),A=s.forwardRef((e,a)=>{let{__scopeAlertDialog:r,children:i,...c}=e,u=x(r),p=s.useRef(null),h=(0,n.s)(a,p),m=s.useRef(null);return(0,t.jsx)(l.G$,{contentName:y,titleName:w,docsSlug:"alert-dialog",children:(0,t.jsx)(N,{scope:r,cancelRef:m,children:(0,t.jsxs)(l.UC,{role:"alertdialog",...u,...c,ref:h,onOpenAutoFocus:(0,o.m)(c.onOpenAutoFocus,e=>{var a;e.preventDefault(),null==(a=m.current)||a.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,t.jsx)(d,{children:i}),(0,t.jsx)(O,{contentRef:p})]})})})});A.displayName=y;var w="AlertDialogTitle",R=s.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,i=x(r);return(0,t.jsx)(l.hE,{...i,...s,ref:a})});R.displayName=w;var E="AlertDialogDescription",k=s.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,i=x(r);return(0,t.jsx)(l.VY,{...i,...s,ref:a})});k.displayName=E;var C=s.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,i=x(r);return(0,t.jsx)(l.bm,{...i,...s,ref:a})});C.displayName="AlertDialogAction";var D="AlertDialogCancel",z=s.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...s}=e,{cancelRef:i}=b(D,r),o=x(r),c=(0,n.s)(a,i);return(0,t.jsx)(l.bm,{...o,...s,ref:c})});z.displayName=D;var O=e=>{let{contentRef:a}=e,r="`".concat(y,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(y,"` by passing a `").concat(E,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(y,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return s.useEffect(()=>{var e;document.getElementById(null==(e=a.current)?void 0:e.getAttribute("aria-describedby"))||console.warn(r)},[r,a]),null},S=r(9434),P=r(285);let B=f,T=v,Z=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(g,{className:(0,S.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s,ref:a})});Z.displayName=g.displayName;let F=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsxs)(j,{children:[(0,t.jsx)(Z,{}),(0,t.jsx)(A,{ref:a,className:(0,S.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...s})]})});F.displayName=A.displayName;let H=e=>{let{className:a,...r}=e;return(0,t.jsx)("div",{className:(0,S.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...r})};H.displayName="AlertDialogHeader";let $=e=>{let{className:a,...r}=e;return(0,t.jsx)("div",{className:(0,S.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...r})};$.displayName="AlertDialogFooter";let q=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(R,{ref:a,className:(0,S.cn)("text-lg font-semibold",r),...s})});q.displayName=R.displayName;let I=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(k,{ref:a,className:(0,S.cn)("text-sm text-muted-foreground",r),...s})});I.displayName=k.displayName;let L=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(C,{ref:a,className:(0,S.cn)((0,P.r)({variant:"destructive"}),r),...s})});L.displayName=C.displayName;let M=s.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)(z,{ref:a,className:(0,S.cn)((0,P.r)({variant:"outline"}),"mt-2 sm:mt-0",r),...s})});M.displayName=z.displayName},3505:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>b});var t=r(5155),s=r(285),i=r(6695),n=r(5127),l=r(6126),o=r(157);let c=(0,o.A)("PackageCheck",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),d=(0,o.A)("PackageX",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]]),u=(0,o.A)("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);var p=r(1949),h=r(4165),m=r(2115),x=r(9434);let f=m.forwardRef((e,a)=>{let{className:r,...s}=e;return(0,t.jsx)("textarea",{className:(0,x.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:a,...s})});f.displayName="Textarea";var v=r(9465),j=r(5695),g=r(7481),y=r(5489),N=r(2980);function b(){let{userData:e,loading:a}=(0,v.A)(),r=(0,j.useRouter)(),{toast:o}=(0,g.dj)(),[x,b]=(0,m.useState)([]),[A,w]=(0,m.useState)(!1),[R,E]=(0,m.useState)(null),[k,C]=(0,m.useState)("");(0,m.useEffect)(()=>{a||e&&["master","empleado"].includes(e.role)||r.push("/")},[e,a,r]);let D=(0,m.useCallback)(async()=>{if(null==e?void 0:e.id)try{let a=await (0,y.ye)(e.id);b(a)}catch(e){console.error("Error fetching assets:",e),o({variant:"destructive",title:"Error",description:"No se pudieron cargar sus activos."})}},[e,o]);(0,m.useEffect)(()=>{e&&D()},[e,D]);let z=async e=>{try{await (0,y.$O)(e),o({title:"Recepci\xf3n Confirmada",description:"El estado del activo ha sido actualizado a 'activo'."}),await D()}catch(e){console.error("Error confirmando recepci\xf3n:",e),o({variant:"destructive",title:"Error",description:"No se pudo confirmar la recepci\xf3n."})}},O=e=>{E(e),w(!0),C("")},S=async e=>{if(e.preventDefault(),!R||!k)return void o({variant:"destructive",title:"Error",description:"Debe proporcionar un motivo de rechazo."});try{await (0,y.kU)(R.id,k),o({title:"Recepci\xf3n Rechazada",description:"El activo ha sido marcado como 'en disputa'. Log\xedstica ser\xe1 notificada."}),w(!1),await D()}catch(e){console.error("Error rechazando recepci\xf3n:",e),o({variant:"destructive",title:"Error",description:"No se pudo rechazar la recepci\xf3n."})}},P=async()=>{if(e)try{await (0,y.oT)(e.id,e.name),o({title:"Proceso de Devoluci\xf3n Iniciado",description:"Tus activos han sido marcados como 'en devoluci\xf3n'. Log\xedstica verificar\xe1 la entrega."}),await D()}catch(e){console.error("Error iniciando devoluci\xf3n:",e),o({variant:"destructive",title:"Error",description:e.message||"No se pudo iniciar el proceso."})}},B=x.filter(e=>"recibido pendiente"===e.status),T=x.filter(e=>"recibido pendiente"!==e.status);return a||!e?(0,t.jsx)("div",{children:"Cargando..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)("h1",{className:"text-lg font-semibold md:text-2xl",children:"Portal del Empleado"})}),B.length>0&&(0,t.jsxs)(i.Zp,{className:"mt-6",children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsx)(i.ZB,{children:"Activos Pendientes de Recepci\xf3n"}),(0,t.jsx)(i.BT,{children:"Confirme o rechace los activos que le han sido enviados."})]}),(0,t.jsx)(i.Wu,{children:(0,t.jsxs)(n.XI,{children:[(0,t.jsx)(n.A0,{children:(0,t.jsxs)(n.Hj,{children:[(0,t.jsx)(n.nd,{children:"Activo"}),(0,t.jsx)(n.nd,{children:"Serial"}),(0,t.jsx)(n.nd,{className:"text-right",children:"Acciones"})]})}),(0,t.jsx)(n.BF,{children:B.map(e=>(0,t.jsxs)(n.Hj,{children:[(0,t.jsx)(n.nA,{children:e.name}),(0,t.jsx)(n.nA,{children:e.serial||"N/A"}),(0,t.jsxs)(n.nA,{className:"text-right",children:[(0,t.jsxs)(s.$,{size:"sm",className:"mr-2",onClick:()=>z(e.id),children:[(0,t.jsx)(c,{className:"h-4 w-4 mr-2"}),"Confirmar"]}),(0,t.jsxs)(s.$,{size:"sm",variant:"destructive",onClick:()=>O(e),children:[(0,t.jsx)(d,{className:"h-4 w-4 mr-2"}),"Rechazar"]})]})]},e.id))})]})})]}),(0,t.jsxs)(i.Zp,{className:"mt-6",children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsx)(i.ZB,{children:"Mis Activos"}),(0,t.jsx)(i.BT,{children:"Activos actualmente bajo su custodia."})]}),(0,t.jsx)(i.Wu,{children:(0,t.jsxs)(n.XI,{children:[(0,t.jsx)(n.A0,{children:(0,t.jsxs)(n.Hj,{children:[(0,t.jsx)(n.nd,{children:"Activo"}),(0,t.jsx)(n.nd,{children:"Serial"}),(0,t.jsx)(n.nd,{children:"Estado"}),(0,t.jsx)(n.nd,{className:"text-right",children:"Acciones"})]})}),(0,t.jsx)(n.BF,{children:T.length>0?T.map(e=>(0,t.jsxs)(n.Hj,{children:[(0,t.jsx)(n.nA,{children:e.name}),(0,t.jsx)(n.nA,{children:e.serial||"N/A"}),(0,t.jsx)(n.nA,{children:(0,t.jsx)(l.E,{variant:"activo"===e.status?"success":"en devoluci\xf3n"===e.status?"warning":"outline",children:e.status})}),(0,t.jsx)(n.nA,{className:"text-right",children:"activo"===e.status&&(0,t.jsx)(s.$,{size:"sm",variant:"outline",disabled:!0,children:"Solicitar Reemplazo"})})]},e.id)):(0,t.jsx)(n.Hj,{children:(0,t.jsx)(n.nA,{colSpan:4,className:"text-center",children:"No tiene activos asignados."})})})]})})]}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsxs)(N.Lt,{children:[(0,t.jsx)(N.tv,{asChild:!0,children:(0,t.jsx)(i.Zp,{className:"cursor-pointer hover:border-destructive",children:(0,t.jsxs)(i.aR,{className:"flex-row items-center gap-4",children:[(0,t.jsx)(u,{className:"h-8 w-8 text-destructive"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.ZB,{children:"Devoluci\xf3n de Activos"}),(0,t.jsx)(i.BT,{children:"Inicie el proceso de devoluci\xf3n de todos sus activos al finalizar su contrato."})]})]})})}),(0,t.jsxs)(N.EO,{children:[(0,t.jsxs)(N.wd,{children:[(0,t.jsxs)(N.r7,{children:[(0,t.jsx)(p.A,{className:"inline-block mr-2 text-destructive"}),"\xbfEst\xe1 seguro?"]}),(0,t.jsx)(N.$v,{children:"Esta acci\xf3n iniciar\xe1 el proceso de devoluci\xf3n de TODOS sus activos con estado 'activo'. Es un paso requerido para generar su paz y salvo. No podr\xe1 deshacer esta acci\xf3n."})]}),(0,t.jsxs)(N.ck,{children:[(0,t.jsx)(N.Zr,{children:"Cancelar"}),(0,t.jsx)(N.Rx,{onClick:P,children:"Continuar"})]})]})]})}),(0,t.jsx)(h.lG,{open:A,onOpenChange:w,children:(0,t.jsx)(h.Cf,{children:(0,t.jsxs)("form",{onSubmit:S,children:[(0,t.jsxs)(h.c7,{children:[(0,t.jsx)(h.L3,{children:"Rechazar Activo"}),(0,t.jsx)(h.rr,{children:"Por favor, explique por qu\xe9 est\xe1 rechazando la recepci\xf3n de este activo. Sea lo m\xe1s detallado posible."})]}),(0,t.jsx)("div",{className:"grid gap-4 py-4",children:(0,t.jsx)(f,{placeholder:"Ej: El equipo lleg\xf3 con la pantalla rota...",value:k,onChange:e=>C(e.target.value),required:!0})}),(0,t.jsxs)(h.Es,{children:[(0,t.jsx)(s.$,{type:"button",variant:"outline",onClick:()=>w(!1),children:"Cancelar"}),(0,t.jsx)(s.$,{type:"submit",children:"Enviar Rechazo"})]})]})})})]})}},5695:(e,a,r)=>{"use strict";var t=r(8999);r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}})},9365:(e,a,r)=>{Promise.resolve().then(r.bind(r,3505))}},e=>{var a=a=>e(e.s=a);e.O(0,[992,416,686,908,977,48,441,684,358],()=>a(9365)),_N_E=e.O()}]);