(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{5127:(e,r,s)=>{"use strict";s.d(r,{A0:()=>d,BF:()=>n,Hj:()=>o,XI:()=>l,nA:()=>m,nd:()=>c});var t=s(5155),a=s(2115),i=s(9434);let l=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:r,className:(0,i.cn)("w-full caption-bottom text-sm",s),...a})})});l.displayName="Table";let d=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("thead",{ref:r,className:(0,i.cn)("[&_tr]:border-b",s),...a})});d.displayName="TableHeader";let n=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("tbody",{ref:r,className:(0,i.cn)("[&_tr:last-child]:border-0",s),...a})});n.displayName="TableBody",a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("tfoot",{ref:r,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...a})}).displayName="TableFooter";let o=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("tr",{ref:r,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...a})});o.displayName="TableRow";let c=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("th",{ref:r,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...a})});c.displayName="TableHead";let m=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("td",{ref:r,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...a})});m.displayName="TableCell",a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("caption",{ref:r,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",s),...a})}).displayName="TableCaption"},6126:(e,r,s)=>{"use strict";s.d(r,{E:()=>d});var t=s(5155);s(2115);var a=s(2085),i=s(9434);let l=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:r,variant:s,...a}=e;return(0,t.jsx)("div",{className:(0,i.cn)(l({variant:s}),r),...a})}},9447:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>g});var t=s(5155),a=s(285),i=s(6695),l=s(5127),d=s(2115),n=s(7250),o=s(9556),c=s(9434);let m=n.bL,f=d.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(n.q7,{ref:r,className:(0,c.cn)("border-b",s),...a})});f.displayName="AccordionItem";let u=d.forwardRef((e,r)=>{let{className:s,children:a,...i}=e;return(0,t.jsx)(n.Y9,{className:"flex",children:(0,t.jsxs)(n.l9,{ref:r,className:(0,c.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...i,children:[a,(0,t.jsx)(o.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});u.displayName=n.l9.displayName;let x=d.forwardRef((e,r)=>{let{className:s,children:a,...i}=e;return(0,t.jsx)(n.UC,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...i,children:(0,t.jsx)("div",{className:(0,c.cn)("pb-4 pt-0",s),children:a})})});x.displayName=n.UC.displayName;var h=s(6126),p=s(6955),v=s(9465),j=s(5695),b=s(7481),N=s(5489);function g(){let{userData:e,loading:r}=(0,v.A)(),s=(0,j.useRouter)(),{toast:n}=(0,b.dj)(),[o,c]=(0,d.useState)([]),[g,y]=(0,d.useState)([]),[w,E]=(0,d.useState)(""),[A,R]=(0,d.useState)(""),[C,k]=(0,d.useState)(""),[T,S]=(0,d.useState)(""),[_,P]=(0,d.useState)("");(0,d.useEffect)(()=>{r||e&&["master","logistica"].includes(e.role)||s.push("/")},[e,r,s]);let B=(0,d.useCallback)(async()=>{try{let[e,r]=await Promise.all([(0,N.K6)(),(0,N.Le)()]);c(e),y(r)}catch(e){console.error("Error fetching data:",e),n({variant:"destructive",title:"Error",description:"No se pudieron cargar los datos."})}},[n]);(0,d.useEffect)(()=>{e&&B()},[e,B]);let F=async(e,r)=>{try{await (0,N.sE)(e,r),n({title:"Activo Verificado",description:"El activo ha sido marcado como devuelto y puesto en stock."}),await B()}catch(e){console.error("Error verificando activo:",e),n({variant:"destructive",title:"Error",description:e.message||"No se pudo verificar el activo."})}},H=async e=>{try{await (0,N.sl)(e),n({title:"Proceso Completado",description:"El proceso de devoluci\xf3n ha sido finalizado."}),await B()}catch(e){console.error("Error completando proceso:",e),n({variant:"destructive",title:"Error",description:e.message||"No se pudo completar el proceso."})}};return r||!e?(0,t.jsx)("div",{children:"Cargando..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)("h1",{className:"text-lg font-semibold md:text-2xl",children:"Panel de Log\xedstica"})}),(0,t.jsx)("div",{className:"grid gap-6 mt-4 md:grid-cols-1",children:(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsx)(i.ZB,{children:"Procesos de Devoluci\xf3n en Curso"}),(0,t.jsx)(i.BT,{children:"Verifique la devoluci\xf3n f\xedsica de los activos de los empleados que terminan su contrato."})]}),(0,t.jsx)(i.Wu,{children:(0,t.jsx)(m,{type:"single",collapsible:!0,className:"w-full",children:g.map(e=>(0,t.jsxs)(f,{value:e.id,children:[(0,t.jsxs)(u,{children:[e.employeeName," - ",e.assets.filter(e=>!e.verified).length," activos pendientes"]}),(0,t.jsxs)(x,{children:[(0,t.jsxs)(l.XI,{children:[(0,t.jsx)(l.A0,{children:(0,t.jsxs)(l.Hj,{children:[(0,t.jsx)(l.nd,{children:"Activo"}),(0,t.jsx)(l.nd,{children:"Serial"}),(0,t.jsx)(l.nd,{children:"Estado"}),(0,t.jsx)(l.nd,{className:"text-right",children:"Acci\xf3n"})]})}),(0,t.jsx)(l.BF,{children:e.assets.map(r=>(0,t.jsxs)(l.Hj,{children:[(0,t.jsx)(l.nA,{children:r.name}),(0,t.jsx)(l.nA,{children:r.serial}),(0,t.jsx)(l.nA,{children:(0,t.jsx)(h.E,{variant:r.verified?"success":"outline",children:r.verified?"Verificado":"Pendiente"})}),(0,t.jsx)(l.nA,{className:"text-right",children:!r.verified&&(0,t.jsxs)(a.$,{size:"sm",onClick:()=>F(e.id,r.id),children:[(0,t.jsx)(p.A,{className:"h-4 w-4 mr-2"})," Verificar"]})})]},r.id))})]}),e.assets.every(e=>e.verified)&&(0,t.jsx)("div",{className:"text-right mt-4",children:(0,t.jsx)(a.$,{variant:"secondary",onClick:()=>H(e.id),children:"Completar Proceso"})})]})]},e.id))})})]})}),(0,t.jsxs)("div",{className:"grid gap-6 mt-6 md:grid-cols-2 lg:grid-cols-3",children:[(0,t.jsx)(i.Zp,{className:"lg:col-span-1"}),(0,t.jsx)(i.Zp,{className:"lg:col-span-2"})]})]})}},9635:(e,r,s)=>{Promise.resolve().then(s.bind(s,9447))}},e=>{var r=r=>e(e.s=r);e.O(0,[992,416,686,790,576,931,441,684,358],()=>r(9635)),_N_E=e.O()}]);