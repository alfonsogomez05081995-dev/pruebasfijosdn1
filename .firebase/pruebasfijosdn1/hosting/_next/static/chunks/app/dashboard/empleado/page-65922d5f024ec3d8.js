(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[815],{10:(e,s,a)=>{"use strict";a.d(s,{$v:()=>p,EO:()=>x,Lt:()=>c,Rx:()=>j,Zr:()=>v,ck:()=>h,r7:()=>f,tv:()=>d,wd:()=>m});var i=a(5155),t=a(2115),r=a(2278),n=a(9434),l=a(285);let c=r.bL,d=r.l9,o=r.ZL,u=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsx)(r.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...t,ref:s})});u.displayName=r.hJ.displayName;let x=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsxs)(o,{children:[(0,i.jsx)(u,{}),(0,i.jsx)(r.UC,{ref:s,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...t})]})});x.displayName=r.UC.displayName;let m=e=>{let{className:s,...a}=e;return(0,i.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...a})};m.displayName="AlertDialogHeader";let h=e=>{let{className:s,...a}=e;return(0,i.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};h.displayName="AlertDialogFooter";let f=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsx)(r.hE,{ref:s,className:(0,n.cn)("text-lg font-semibold",a),...t})});f.displayName=r.hE.displayName;let p=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsx)(r.VY,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a),...t})});p.displayName=r.VY.displayName;let j=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsx)(r.rc,{ref:s,className:(0,n.cn)((0,l.r)({variant:"destructive"}),a),...t})});j.displayName=r.rc.displayName;let v=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsx)(r.ZD,{ref:s,className:(0,n.cn)((0,l.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...t})});v.displayName=r.ZD.displayName},4903:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>y});var i=a(5155),t=a(285),r=a(6695),n=a(5127),l=a(6126),c=a(7313),d=a(4579),o=a(2703),u=a(5675),x=a(1949),m=a(4165),h=a(2115),f=a(9434);let p=h.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsx)("textarea",{className:(0,f.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...t})});p.displayName="Textarea";var j=a(9465),v=a(5695),g=a(7481),N=a(5489),b=a(10);function y(){let{userData:e,loading:s}=(0,j.A)(),a=(0,v.useRouter)(),{toast:f}=(0,g.dj)(),[y,w]=(0,h.useState)([]),[E,A]=(0,h.useState)(!1),[R,C]=(0,h.useState)(null),[k,z]=(0,h.useState)("");(0,h.useEffect)(()=>{s||e&&["master","empleado"].includes(e.role)||a.push("/")},[e,s,a]);let Z=(0,h.useCallback)(async()=>{if(null==e?void 0:e.id)try{let s=await (0,N.ye)(e.id);w(s)}catch(e){console.error("Error fetching assets:",e),f({variant:"destructive",title:"Error",description:"No se pudieron cargar sus activos."})}},[e,f]);(0,h.useEffect)(()=>{e&&Z()},[e,Z]);let S=async e=>{try{await (0,N.$O)(e),f({title:"Recepci\xf3n Confirmada",description:"El estado del activo ha sido actualizado a 'activo'."}),await Z()}catch(e){console.error("Error confirmando recepci\xf3n:",e),f({variant:"destructive",title:"Error",description:"No se pudo confirmar la recepci\xf3n."})}},B=e=>{C(e),A(!0),z("")},D=async e=>{if(e.preventDefault(),!R||!k)return void f({variant:"destructive",title:"Error",description:"Debe proporcionar un motivo de rechazo."});try{await (0,N.kU)(R.id,k),f({title:"Recepci\xf3n Rechazada",description:"El activo ha sido marcado como 'en disputa'. Log\xedstica ser\xe1 notificada."}),A(!1),await Z()}catch(e){console.error("Error rechazando recepci\xf3n:",e),f({variant:"destructive",title:"Error",description:"No se pudo rechazar la recepci\xf3n."})}},L=async()=>{if(e)try{await (0,N.oT)(e.id,e.name),f({title:"Proceso de Devoluci\xf3n Iniciado",description:"Tus activos han sido marcados como 'en devoluci\xf3n'. Log\xedstica verificar\xe1 la entrega."}),await Z()}catch(e){console.error("Error iniciando devoluci\xf3n:",e),f({variant:"destructive",title:"Error",description:e.message||"No se pudo iniciar el proceso."})}},O=y.filter(e=>"recibido pendiente"===e.status),$=y.filter(e=>"recibido pendiente"!==e.status);return s||!e?(0,i.jsx)("div",{children:"Cargando..."}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h1",{className:"text-lg font-semibold md:text-2xl mb-4",children:"Portal del Empleado"}),(0,i.jsxs)(c.tU,{defaultValue:"pending",className:"w-full",children:[(0,i.jsxs)(c.j7,{className:"grid w-full grid-cols-3",children:[(0,i.jsxs)(c.Xi,{value:"pending",children:["Activos Pendientes ",(0,i.jsx)(l.E,{className:"ml-2",children:O.length})]}),(0,i.jsx)(c.Xi,{value:"my-assets",children:"Mis Activos"}),(0,i.jsx)(c.Xi,{value:"return",children:"Devoluci\xf3n"})]}),(0,i.jsx)(c.av,{value:"pending",children:O.length>0?(0,i.jsxs)(r.Zp,{className:"mt-6",children:[(0,i.jsxs)(r.aR,{children:[(0,i.jsx)(r.ZB,{children:"Activos Pendientes de Recepci\xf3n"}),(0,i.jsx)(r.BT,{children:"Confirme o rechace los activos que le han sido enviados."})]}),(0,i.jsx)(r.Wu,{children:(0,i.jsxs)(n.XI,{children:[(0,i.jsx)(n.A0,{children:(0,i.jsxs)(n.Hj,{children:[(0,i.jsx)(n.nd,{children:"Activo"}),(0,i.jsx)(n.nd,{children:"Serial"}),(0,i.jsx)(n.nd,{className:"text-right",children:"Acciones"})]})}),(0,i.jsx)(n.BF,{children:O.map(e=>(0,i.jsxs)(n.Hj,{children:[(0,i.jsx)(n.nA,{children:e.name}),(0,i.jsx)(n.nA,{children:e.serial||"N/A"}),(0,i.jsxs)(n.nA,{className:"text-right",children:[(0,i.jsxs)(t.$,{size:"sm",className:"mr-2",onClick:()=>S(e.id),children:[(0,i.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Confirmar"]}),(0,i.jsxs)(t.$,{size:"sm",variant:"destructive",onClick:()=>B(e),children:[(0,i.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Rechazar"]})]})]},e.id))})]})})]}):(0,i.jsx)(r.Zp,{className:"mt-6",children:(0,i.jsx)(r.Wu,{className:"pt-6",children:(0,i.jsx)("p",{className:"text-center",children:"No tiene activos pendientes de recepci\xf3n."})})})}),(0,i.jsx)(c.av,{value:"my-assets",children:(0,i.jsxs)(r.Zp,{className:"mt-6",children:[(0,i.jsxs)(r.aR,{children:[(0,i.jsx)(r.ZB,{children:"Mis Activos"}),(0,i.jsx)(r.BT,{children:"Activos actualmente bajo su custodia."})]}),(0,i.jsx)(r.Wu,{children:(0,i.jsxs)(n.XI,{children:[(0,i.jsx)(n.A0,{children:(0,i.jsxs)(n.Hj,{children:[(0,i.jsx)(n.nd,{children:"Activo"}),(0,i.jsx)(n.nd,{children:"Serial"}),(0,i.jsx)(n.nd,{children:"Estado"}),(0,i.jsx)(n.nd,{className:"text-right",children:"Acciones"})]})}),(0,i.jsx)(n.BF,{children:$.length>0?$.map(e=>(0,i.jsxs)(n.Hj,{children:[(0,i.jsx)(n.nA,{children:e.name}),(0,i.jsx)(n.nA,{children:e.serial||"N/A"}),(0,i.jsx)(n.nA,{children:(0,i.jsx)(l.E,{variant:"activo"===e.status?"success":"en devoluci\xf3n"===e.status?"warning":"outline",children:e.status})}),(0,i.jsx)(n.nA,{className:"text-right",children:"activo"===e.status&&(0,i.jsx)(t.$,{size:"sm",variant:"outline",disabled:!0,children:"Solicitar Reemplazo"})})]},e.id)):(0,i.jsx)(n.Hj,{children:(0,i.jsx)(n.nA,{colSpan:4,className:"text-center",children:"No tiene activos asignados."})})})]})})]})}),(0,i.jsx)(c.av,{value:"return",children:(0,i.jsx)("div",{className:"mt-6",children:(0,i.jsxs)(b.Lt,{children:[(0,i.jsx)(b.tv,{asChild:!0,children:(0,i.jsx)(r.Zp,{className:"cursor-pointer hover:border-destructive",children:(0,i.jsxs)(r.aR,{className:"flex-row items-center gap-4",children:[(0,i.jsx)(u.A,{className:"h-8 w-8 text-destructive"}),(0,i.jsxs)("div",{children:[(0,i.jsx)(r.ZB,{children:"Devoluci\xf3n de Activos"}),(0,i.jsx)(r.BT,{children:"Inicie el proceso de devoluci\xf3n de todos sus activos al finalizar su contrato."})]})]})})}),(0,i.jsxs)(b.EO,{children:[(0,i.jsxs)(b.wd,{children:[(0,i.jsxs)(b.r7,{children:[(0,i.jsx)(x.A,{className:"inline-block mr-2 text-destructive"}),"\xbfEst\xe1 seguro?"]}),(0,i.jsx)(b.$v,{children:"Esta acci\xf3n iniciar\xe1 el proceso de devoluci\xf3n de TODOS sus activos con estado 'activo'. Es un paso requerido para generar su paz y salvo. No podr\xe1 deshacer esta acci\xf3n."})]}),(0,i.jsxs)(b.ck,{children:[(0,i.jsx)(b.Zr,{children:"Cancelar"}),(0,i.jsx)(b.Rx,{onClick:L,children:"Continuar"})]})]})]})})})]}),(0,i.jsx)(m.lG,{open:E,onOpenChange:A,children:(0,i.jsx)(m.Cf,{children:(0,i.jsxs)("form",{onSubmit:D,children:[(0,i.jsxs)(m.c7,{children:[(0,i.jsx)(m.L3,{children:"Rechazar Activo"}),(0,i.jsx)(m.rr,{children:"Por favor, explique por qu\xe9 est\xe1 rechazando la recepci\xf3n de este activo. Sea lo m\xe1s detallado posible."})]}),(0,i.jsx)("div",{className:"grid gap-4 py-4",children:(0,i.jsx)(p,{placeholder:"Ej: El equipo lleg\xf3 con la pantalla rota...",value:k,onChange:e=>z(e.target.value),required:!0})}),(0,i.jsxs)(m.Es,{children:[(0,i.jsx)(t.$,{type:"button",variant:"outline",onClick:()=>A(!1),children:"Cancelar"}),(0,i.jsx)(t.$,{type:"submit",children:"Enviar Rechazo"})]})]})})})]})}},5477:(e,s,a)=>{Promise.resolve().then(a.bind(a,4903))},7313:(e,s,a)=>{"use strict";a.d(s,{Xi:()=>d,av:()=>o,j7:()=>c,tU:()=>l});var i=a(5155),t=a(2115),r=a(704),n=a(9434);let l=r.bL,c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsx)(r.B8,{ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...t})});c.displayName=r.B8.displayName;let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsx)(r.l9,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...t})});d.displayName=r.l9.displayName;let o=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,i.jsx)(r.UC,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...t})});o.displayName=r.UC.displayName}},e=>{var s=s=>e(e.s=s);e.O(0,[992,416,686,908,977,301,48,441,684,358],()=>s(5477)),_N_E=e.O()}]);